# @s = area effect clouds tag=gm4_ore_radius
#at @s
# run from pulse_check

execute as @e[type=item,distance=..10,nbt={Item:{id:"minecraft:cobblestone",Count:1b},Age:0s,PickupDelay:10s},y_rotation=0..71] run data merge entity @s {Item:{id:player_head,tag:{gm4_metallurgy:{ore_type:"copper",item:"ore"},SkullOwner:{Id:"085b275e-bb5a-4344-b437-392551743755",Properties:{textures:[{Value:"eyJ0aW1lc3RhbXAiOjE0ODE0MTA4Mjk2OTAsInByb2ZpbGVJZCI6Ijk4NWIyNzVlYmI1YTQzNDRiNDM3Njg5NTI4NjNhNjNmIiwicHJvZmlsZU5hbWUiOiJTcGFya3MiLCJ0ZXh0dXJlcyI6eyJTS0lOIjp7InVybCI6Imh0dHA6Ly90ZXh0dXJlcy5taW5lY3JhZnQubmV0L3RleHR1cmUvNDNjMWE3ZGEyZWJkZGI0YTk3YzI3NDA0N2RlNzFkN2RjZWJjMTc2YTBlNjE3MzBmZmQzMzIzODUzNTNlIn0sIkNBUEUiOnsidXJsIjoiaHR0cDovL3RleHR1cmVzLm1pbmVjcmFmdC5uZXQvdGV4dHVyZS81YzNjYTdlZTJhNDk4ZjFiNWQyNThkNWZhOTI3ZTYzZTQzMzE0M2FkZDU1MzhjZjYzYjZhOWI3OGFlNzM1In19fQ=="}]}},CustomModelData:18,display:{Name:'{"translate":"%1$s%3427655$s","with":["Malachite Lump",{"translate":"item.gm4.metallurgy.malachite_lump"}],"italic":false,"color":"white"}',Lore:['[{"translate":"%1$s%3427655$s","with":["Contains ",{"translate":"text.gm4.metallurgy.contains"}],"italic":false,"color":"gray"},{"translate":"%1$s%3427655$s","with":["Copper",{"translate":"text.gm4.metallurgy.copper"}],"italic":false,"color":"gold"}]']}}}}


execute as @e[type=item,distance=..10,nbt={Item:{id:"minecraft:granite",Count:1b},Age:0s,PickupDelay:10s},y_rotation=0..71] run data merge entity @s {Item:{id:player_head,tag:{gm4_metallurgy:{ore_type:"barium",item:"ore"},SkullOwner:{Id:"085b275e-bb5a-4344-b437-538870074395",Properties:{textures:[{Value:"eyJ0aW1lc3RhbXAiOjE0ODE0MTA2NjExOTcsInByb2ZpbGVJZCI6Ijk4NWIyNzVlYmI1YTQzNDRiNDM3Njg5NTI4NjNhNjNmIiwicHJvZmlsZU5hbWUiOiJTcGFya3MiLCJ0ZXh0dXJlcyI6eyJTS0lOIjp7InVybCI6Imh0dHA6Ly90ZXh0dXJlcy5taW5lY3JhZnQubmV0L3RleHR1cmUvNGE3ZDY4M2I1MTE4ODU2YmJjOTQ4MDNiMjI3ZTk4ZTU1NTc2MjUxMTU3ZGJhZmE5MzRjMWVjOGZlYzY4NmU3In0sIkNBUEUiOnsidXJsIjoiaHR0cDovL3RleHR1cmVzLm1pbmVjcmFmdC5uZXQvdGV4dHVyZS81YzNjYTdlZTJhNDk4ZjFiNWQyNThkNWZhOTI3ZTYzZTQzMzE0M2FkZDU1MzhjZjYzYjZhOWI3OGFlNzM1In19fQ=="}]}},CustomModelData:19,display:{Name:'{"translate":"%1$s%3427655$s","with":["Baryte Lump",{"translate":"item.gm4.metallurgy.baryte_lump"}],"italic":false,"color":"white"}',Lore:['[{"translate":"%1$s%3427655$s","with":["Contains ",{"translate":"text.gm4.metallurgy.contains"}],"italic":false,"color":"gray"},{"translate":"%1$s%3427655$s","with":["Barium",{"translate":"text.gm4.metallurgy.barium"}],"italic":false,"color":"white"}]']}}}}

execute as @e[type=item,distance=..10,nbt={Item:{id:"minecraft:diorite",Count:1b},Age:0s,PickupDelay:10s},y_rotation=0..71] run data merge entity @s {Item:{id:player_head,tag:{gm4_metallurgy:{ore_type:"thorium",item:"ore"},SkullOwner:{Id:"085b275e-bb5a-4344-b437-269093629763",Properties:{textures:[{Value:"eyJ0aW1lc3RhbXAiOjE0ODE0MTExMzQwMDQsInByb2ZpbGVJZCI6Ijk4NWIyNzVlYmI1YTQzNDRiNDM3Njg5NTI4NjNhNjNmIiwicHJvZmlsZU5hbWUiOiJTcGFya3MiLCJ0ZXh0dXJlcyI6eyJTS0lOIjp7InVybCI6Imh0dHA6Ly90ZXh0dXJlcy5taW5lY3JhZnQubmV0L3RleHR1cmUvMWRkZjMzZDViYmMxZmJjYTA0MDIzZjNkNWJjNjhkMWFkODRjN2RjYmUxZTJkYTk3YzIxOGVjOWNiZDQ0YTUifSwiQ0FQRSI6eyJ1cmwiOiJodHRwOi8vdGV4dHVyZXMubWluZWNyYWZ0Lm5ldC90ZXh0dXJlLzVjM2NhN2VlMmE0OThmMWI1ZDI1OGQ1ZmE5MjdlNjNlNDMzMTQzYWRkNTUzOGNmNjNiNmE5Yjc4YWU3MzUifX19"}]}},CustomModelData:20,display:{Name:'{"translate":"%1$s%3427655$s","with":["Thorianite Lump",{"translate":"item.gm4.metallurgy.thorianite_lump"}],"italic":false,"color":"white"}',Lore:['[{"translate":"%1$s%3427655$s","with":["Contains ",{"translate":"text.gm4.metallurgy.contains"}],"italic":false,"color":"gray"},{"translate":"%1$s%3427655$s","with":["Thorium",{"translate":"text.gm4.metallurgy.thorium"}],"italic":false,"color":"dark_gray"}]']}}}}

execute as @e[type=item,distance=..10,nbt={Item:{id:"minecraft:andesite",Count:1b},Age:0s,PickupDelay:10s},y_rotation=0..71] run data merge entity @s {Item:{id:player_head,tag:{gm4_metallurgy:{ore_type:"aluminium",item:"ore"},SkullOwner:{Id:"085b275e-bb5a-4344-b437-466412510147",Properties:{textures:[{Value:"eyJ0aW1lc3RhbXAiOjE0ODE0MDk5OTEzMzMsInByb2ZpbGVJZCI6Ijk4NWIyNzVlYmI1YTQzNDRiNDM3Njg5NTI4NjNhNjNmIiwicHJvZmlsZU5hbWUiOiJTcGFya3MiLCJ0ZXh0dXJlcyI6eyJTS0lOIjp7InVybCI6Imh0dHA6Ly90ZXh0dXJlcy5taW5lY3JhZnQubmV0L3RleHR1cmUvYzdmNTRiOTc5Y2Y0YzUzM2Q5OTVjMDdiOTljMWU5OWI5MTdlYzA2ODU2ZDQ2YjBhMmU2ODhiYmQzZDE0ZSJ9LCJDQVBFIjp7InVybCI6Imh0dHA6Ly90ZXh0dXJlcy5taW5lY3JhZnQubmV0L3RleHR1cmUvNWMzY2E3ZWUyYTQ5OGYxYjVkMjU4ZDVmYTkyN2U2M2U0MzMxNDNhZGQ1NTM4Y2Y2M2I2YTliNzhhZTczNSJ9fX0="}]}},CustomModelData:21,display:{Name:'{"translate":"%1$s%3427655$s","with":["Bauxite Lump",{"translate":"item.gm4.metallurgy.bauxite_lump"}],"italic":false,"color":"white"}',Lore:['[{"translate":"%1$s%3427655$s","with":["Contains ",{"translate":"text.gm4.metallurgy.contains"}],"italic":false,"color":"gray"},{"translate":"%1$s%3427655$s","with":["Aluminium",{"translate":"text.gm4.metallurgy.aluminium"}],"italic":false,"color":"red"}]']}}}}

#How Ad-ore-able advancement
execute if entity @e[type=item,distance=..10,limit=1,nbt={Item:{id:"minecraft:player_head",tag:{gm4_metallurgy:{item:"ore"}}},Age:1s}] run advancement grant @a[distance=..15,gamemode=!spectator] only gm4:metallurgy_blast_ore

scoreboard players set found_ore_radius gm4_ml_data 0
